-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  U:\Documents\workshops summer 2023\summer repro package\Data\presi
> dents\../../Output/presidents_analysis.log
  log type:  text
 opened on:  14 Jun 2023, 18:18:22

. 
. *compare average percent for dems and reps. Total. T test
. ttest demp == repp

Paired t test
------------------------------------------------------------------------------
Variable |     Obs        Mean    Std. err.   Std. dev.   [95% conf. interval]
---------+--------------------------------------------------------------------
    demp |  12,028    .3592411    .0013989    .1534188     .356499    .3619831
    repp |  12,028    .6138256    .0013946    .1529437    .6110921    .6165592
---------+--------------------------------------------------------------------
    diff |  12,028   -.2545846    .0027851    .3054508   -.2600439   -.2491253
------------------------------------------------------------------------------
     mean(diff) = mean(demp - repp)                               t = -91.4087
 H0: mean(diff) = 0                              Degrees of freedom =    12027

 Ha: mean(diff) < 0           Ha: mean(diff) != 0           Ha: mean(diff) > 0
 Pr(T < t) = 0.0000         Pr(|T| > |t|) = 0.0000          Pr(T > t) = 1.0000

. *By a specific year
. ttest demp == repp if year == 2008

Paired t test
------------------------------------------------------------------------------
Variable |     Obs        Mean    Std. err.   Std. dev.   [95% conf. interval]
---------+--------------------------------------------------------------------
    demp |   3,007    .4142162    .0025047    .1373467    .4093052    .4191273
    repp |   3,007    .5692266    .0025028    .1372459    .5643191     .574134
---------+--------------------------------------------------------------------
    diff |   3,007   -.1550104     .005005    .2744566    -.164824   -.1451967
------------------------------------------------------------------------------
     mean(diff) = mean(demp - repp)                               t = -30.9709
 H0: mean(diff) = 0                              Degrees of freedom =     3006

 Ha: mean(diff) < 0           Ha: mean(diff) != 0           Ha: mean(diff) > 0
 Pr(T < t) = 0.0000         Pr(|T| > |t|) = 0.0000          Pr(T > t) = 1.0000

. 
. *create summary dataset sum of total votes for democrats and republicans. 
. preserve

. collapse (sum) democrat republican

. browse

. restore

. 
. *ttest frequency of same group 2 specific years. 
. *applying changes to dataset. Use preserve as my undo function. 
. preserve

. keep if year == 2008 | year == 2020
(6,018 observations deleted)

. ttest repp, by(year)

Two-sample t test with equal variances
------------------------------------------------------------------------------
   Group |     Obs        Mean    Std. err.   Std. dev.   [95% conf. interval]
---------+--------------------------------------------------------------------
    2008 |   3,007    .5692266    .0025028    .1372459    .5643191     .574134
    2020 |   3,007      .65308     .002893    .1586413    .6474076    .6587525
---------+--------------------------------------------------------------------
Combined |   6,014    .6111533    .0019875    .1541305    .6072571    .6150495
---------+--------------------------------------------------------------------
    diff |           -.0838535    .0038254               -.0913526   -.0763543
------------------------------------------------------------------------------
    diff = mean(2008) - mean(2020)                                t = -21.9202
H0: diff = 0                                     Degrees of freedom =     6012

    Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = 0.0000         Pr(|T| > |t|) = 0.0000          Pr(T > t) = 1.0000

. ttest demp, by(year)

Two-sample t test with equal variances
------------------------------------------------------------------------------
   Group |     Obs        Mean    Std. err.   Std. dev.   [95% conf. interval]
---------+--------------------------------------------------------------------
    2008 |   3,007    .4142162    .0025047    .1373467    .4093052    .4191273
    2020 |   3,007    .3290006    .0028641    .1570565    .3233848    .3346164
---------+--------------------------------------------------------------------
Combined |   6,014    .3716084      .00198    .1535498    .3677269    .3754899
---------+--------------------------------------------------------------------
    diff |            .0852156    .0038048                .0777568    .0926743
------------------------------------------------------------------------------
    diff = mean(2008) - mean(2020)                                t =  22.3969
H0: diff = 0                                     Degrees of freedom =     6012

    Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = 1.0000         Pr(|T| > |t|) = 0.0000          Pr(T > t) = 0.0000

. 
. *F test compare standard deviation. 
. sdtest demp == repp

Variance ratio test
------------------------------------------------------------------------------
Variable |     Obs        Mean    Std. err.   Std. dev.   [95% conf. interval]
---------+--------------------------------------------------------------------
    demp |   6,014    .3716084      .00198    .1535498    .3677269    .3754899
    repp |   6,014    .6111533    .0019875    .1541305    .6072571    .6150495
---------+--------------------------------------------------------------------
Combined |  12,028    .4913809    .0017777    .1949655    .4878963    .4948655
------------------------------------------------------------------------------
    ratio = sd(demp) / sd(repp)                                   f =   0.9925
H0: ratio = 1                                  Degrees of freedom = 6013, 6013

    Ha: ratio < 1               Ha: ratio != 1                 Ha: ratio > 1
  Pr(F < f) = 0.3849         2*Pr(F < f) = 0.7697           Pr(F > f) = 0.6151

. 
. *counter to preserve. Returns dataset to structure before 'preserve' is used.
>  
. restore

. 
. 
. *2 way graph change in percent dem and rep over time. Both on same graph.
. twoway (line demp year, lcolor(yellow)) (line repp year, lcolor(lime))

. *Looks ugly. Rearrange dataset and do again.
. preserve

. tabstat repp demp, by(year) s(mean med sd) 

Summary statistics: Mean, p50, SD
Group variable: year 

    year |      repp      demp
---------+--------------------
    2008 |  .5692266  .4142162
         |  .5734136  .4097508
         |  .1372459  .1373467
---------+--------------------
    2012 |    .59874  .3827536
         |  .6095039  .3693773
         |  .1465225  .1465292
---------+--------------------
    2016 |   .634256  .3109938
         |  .6644666  .2792575
         |  .1547314  .1495039
---------+--------------------
    2020 |    .65308  .3290006
         |  .6856333  .2969466
         |  .1586413  .1570565
---------+--------------------
   Total |  .6138256  .3592411
         |  .6299082  .3418477
         |  .1529437  .1534188
------------------------------

. collapse (mean) repp demp (sum) democrat republican, by (year)

. twoway (line demp year, lcolor(yellow)) (line repp year, lcolor(lime))

. restore

. 
. *ANOVA test are proportions for all years dems, reps equal? 
. bysort year: summarize totalvote democrat republican

-------------------------------------------------------------------------------
-> year = 2008

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
   totalvote |      3,007    42396.07    121704.6         79    3318248
    democrat |      3,007    22469.52    78251.78          8    2295853
  republican |      3,007    19327.65    45470.89         67     956425

-------------------------------------------------------------------------------
-> year = 2012

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
   totalvote |      3,007    41652.62    118753.8         64    3181067
    democrat |      3,007    21271.27    75300.63          5    2216903
  republican |      3,007     19662.7    45393.54         54     885333

-------------------------------------------------------------------------------
-> year = 2016

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
   totalvote |      3,007    44322.97    128263.2         65    3434308
    democrat |      3,007    21280.45    81773.64          4    2464364
  republican |      3,007    20346.73    43771.42         58     769743

-------------------------------------------------------------------------------
-> year = 2020

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
   totalvote |      3,007    51366.93    152722.4         66    4264365
    democrat |      3,007    26331.18    99005.18          4    3028885
  republican |      3,007    24040.91    55122.78         60    1145530


. bysort year: summarize totalvote democrat republican, detail

-------------------------------------------------------------------------------
-> year = 2008

                          totalvote
-------------------------------------------------------------
      Percentiles      Smallest
 1%          557             79
 5%         1384            163
10%         2261            202       Obs               3,007
25%         4855            263       Sum of wgt.       3,007

50%        10939                      Mean           42396.07
                        Largest       Std. dev.      121704.6
75%        29017        1231047
90%        88311        1364962       Variance       1.48e+10
95%       187115        2137466       Skewness       11.30107
99%       559854        3318248       Kurtosis       225.2866

                          democrat
-------------------------------------------------------------
      Percentiles      Smallest
 1%          117              8
 5%          366             12
10%          699             39       Obs               3,007
25%         1792             40       Sum of wgt.       3,007

50%         4463                      Mean           22469.52
                        Largest       Std. dev.      78251.78
75%        12329         660085
90%        41886         666581       Variance       6.12e+09
95%        99586        1629024       Skewness       13.62752
99%       325017        2295853       Kurtosis       311.6302

                         republican
-------------------------------------------------------------
      Percentiles      Smallest
 1%          342             67
 5%          844             94
10%         1346            151       Obs               3,007
25%         2858            156       Sum of wgt.       3,007

50%         6272                      Mean           19327.65
                        Largest       Std. dev.      45470.89
75%        15898         571883
90%        45021         579064       Variance       2.07e+09
95%        81010         746448       Skewness       8.314566
99%       199880         956425       Kurtosis       115.5959

-------------------------------------------------------------------------------
-> year = 2012

                          totalvote
-------------------------------------------------------------
      Percentiles      Smallest
 1%          555             64
 5%         1340            145
10%         2182            167       Obs               3,007
25%         4742            262       Sum of wgt.       3,007

50%        10674                      Mean           41652.62
                        Largest       Std. dev.      118753.8
75%        28384        1192282
90%        88774        1380959       Variance       1.41e+10
95%       181988        2011598       Skewness        10.9167
99%       542102        3181067       Kurtosis       210.6483

                          democrat
-------------------------------------------------------------
      Percentiles      Smallest
 1%           89              5
 5%          281              9
10%          575             29       Obs               3,007
25%         1508             30       Sum of wgt.       3,007

50%         3959                      Mean           21271.27
                        Largest       Std. dev.      75300.63
75%        11315         626957
90%        39847         668004       Variance       5.67e+09
95%        95493        1488537       Skewness        13.4194
99%       315273        2216903       Kurtosis       304.9834

                         republican
-------------------------------------------------------------
      Percentiles      Smallest
 1%          348             54
 5%          859             84
10%         1344            139       Obs               3,007
25%         2885            166       Sum of wgt.       3,007

50%         6404                      Mean            19662.7
                        Largest       Std. dev.      45393.54
75%        16276         582332
90%        45748         586073       Variance       2.06e+09
95%        85627         749885       Skewness       7.838015
99%       206773         885333       Kurtosis       101.2442

-------------------------------------------------------------------------------
-> year = 2016

                          totalvote
-------------------------------------------------------------
      Percentiles      Smallest
 1%          541             65
 5%         1328            159
10%         2205            186       Obs               3,007
25%         4821            273       Sum of wgt.       3,007

50%        11047                      Mean           44322.97
                        Largest       Std. dev.      128263.2
75%        29709        1312112
90%        94651        1567834       Variance       1.65e+10
95%       199687        2180344       Skewness       11.01125
99%       594574        3434308       Kurtosis       212.3798

                          democrat
-------------------------------------------------------------
      Percentiles      Smallest
 1%           65              4
 5%          214              5
10%          419             14       Obs               3,007
25%         1143             17       Sum of wgt.       3,007

50%         3109                      Mean           21280.45
                        Largest       Std. dev.      81773.64
75%         9675         718322
90%        38829         735476       Variance       6.69e+09
95%       100795        1611946       Skewness       14.07122
99%       343070        2464364       Kurtosis       330.1044

                         republican
-------------------------------------------------------------
      Percentiles      Smallest
 1%          362             58
 5%          893             84
10%         1472            149       Obs               3,007
25%         3204            171       Sum of wgt.       3,007

50%         7239                      Mean           20346.73
                        Largest       Std. dev.      43771.42
75%        17865         507148
90%        48624         545955       Variance       1.92e+09
95%        85045         747361       Skewness       7.139379
99%       195216         769743       Kurtosis       84.30116

-------------------------------------------------------------------------------
-> year = 2020

                          totalvote
-------------------------------------------------------------
      Percentiles      Smallest
 1%          598             66
 5%         1431            159
10%         2374            194       Obs               3,007
25%         5298            285       Sum of wgt.       3,007

50%        12467                      Mean           51366.93
                        Largest       Std. dev.      152722.4
75%        33593        1641257
90%       108022        2076086       Variance       2.33e+10
95%       231659        2325405       Skewness       11.66042
99%       697813        4264365       Kurtosis       238.3114

                          democrat
-------------------------------------------------------------
      Percentiles      Smallest
 1%           74              4
 5%          232              8
10%          478             16       Obs               3,007
25%         1259             17       Sum of wgt.       3,007

50%         3605                      Mean           26331.18
                        Largest       Std. dev.      99005.18
75%        12127         964650
90%        49491        1040774       Variance       9.80e+09
95%       128199        1725973       Skewness       13.88131
99%       416386        3028885       Kurtosis       330.0978

                         republican
-------------------------------------------------------------
      Percentiles      Smallest
 1%          411             60
 5%         1026            127
10%         1629            151       Obs               3,007
25%         3649            183       Sum of wgt.       3,007

50%         8313                      Mean           24040.91
                        Largest       Std. dev.      55122.78
75%        20804         676498
90%        57110         700630       Variance       3.04e+09
95%       100218         995665       Skewness       8.548158
99%       226956        1145530       Kurtosis       121.4465


. 
. log close
      name:  <unnamed>
       log:  U:\Documents\workshops summer 2023\summer repro package\Data\presi
> dents\../../Output/presidents_analysis.log
  log type:  text
 closed on:  14 Jun 2023, 18:18:32
-------------------------------------------------------------------------------
